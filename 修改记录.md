# 修改记录（编辑中）

#### UpdateTime:2024.9.20

- 加入了从`通讯录`中获取成员列表的功能

- 加入了从`电子表格`中初始化物资信息的功能，`init.py`中的设置初值功能已注释

> **Tips：*使用此功能请记得在`.env`文件中配置存储物资信息的电子表格的

> `SHEET_TOKEN`to`ITEM_SHEET_TOKEN`

> 什么是`SHEET_TOKEN`请查找飞书的开发者文档。

> 关于获取`SHEET_TOKEN`，我采用的办法是在电脑端飞书-云文档-侧栏（如没有请单机左上角按钮`三`）-我的文档库-找到你想获取TOKEN的文档-右键-分享-复制链接

> 此时的链接就是开发者文档中`.../sheets/...`的格式了

> 对于电子表格中的物资信息有如下规则：

> - 第一行可自定义

> - 从第二行开始，各列有自己的含义：

> - A:类型， B:名称， C:总数， D:损坏数（不可用）

> - 从第二行到最后一行始终保持该规律，其中AB列不能存在空值

> Todo:通过搜索云空间自行找到物资储物表

以上功能均需要开启对应权限

- 偷懒只写了通过`user_id`进行各种操作，如需使用`open_id`等其他类型区分用户，请自己添加

- 修改了机器人菜单,目前菜单事件仅有`物资查询`-`custom_menu.inspect.items`

- 修改了飞书卡片-保存至`./card_example.json`

> 飞书卡片在旧版本飞书中存在不兼容情况（具体表现为左侧按钮被遮住），需要更新至 `V6.8及以上版本`